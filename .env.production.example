# =============================================================================
# Cafe Havilah POS — Production environment (this repository only)
# =============================================================================
# Copy to .env and set values. Never commit .env.
#   cp .env.production.example .env && chmod 600 .env
# =============================================================================
# REQUIRED = must be set for the app to run correctly.
# OPTIONAL = used only for specific features or have safe defaults.
# =============================================================================

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
# REQUIRED — used by docker-compose for postgres service and to build DATABASE_URL
POSTGRES_USER=posuser
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD
POSTGRES_DB=pos

# REQUIRED — Prisma and in-app backup (lib/backup/database-backup.ts).
# In Compose, override is set from POSTGRES_* above; set explicitly if using external DB.
DATABASE_URL=postgresql://posuser:CHANGE_ME_STRONG_PASSWORD@postgres:5432/pos?schema=public

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
# REQUIRED — JWT signing for staff auth (lib/pos-auth.ts). Minimum 16 characters.
POS_JWT_SECRET=CHANGE_ME_AT_LEAST_16_CHARS_SECRET

# OPTIONAL — Legacy admin login (AuthManager). Server-side; use bcrypt hash only.
# Generate hash: node -e "console.log(require('bcrypt').hashSync('your-password', 10))"
# If unset, POST /api/auth/admin-login returns 503 (fail securely).
# ADMIN_USERNAME=admin
# ADMIN_PASSWORD_HASH=$2b$10$...

# -----------------------------------------------------------------------------
# Runtime
# -----------------------------------------------------------------------------
# Set by Docker in this setup; must be production in production.
NODE_ENV=production

# -----------------------------------------------------------------------------
# Realtime (SSE)
# -----------------------------------------------------------------------------
# OPTIONAL — lib/realtime-bus.ts. If set, uses Redis; if unset, in-memory (single instance).
# When using Redis: start with docker compose --profile redis up; set REDIS_URL below.
# REDIS_URL=redis://redis:6379

# -----------------------------------------------------------------------------
# App URLs
# -----------------------------------------------------------------------------
# OPTIONAL — lib/config.ts (Pesapal callbacks, server-side links). Fallback: NEXT_PUBLIC_APP_ORIGIN.
APP_BASE_URL=https://pos.example.com

# OPTIONAL — lib/config.ts (browser origin). Set when frontend is accessed via public URL.
NEXT_PUBLIC_APP_ORIGIN=https://pos.example.com

# -----------------------------------------------------------------------------
# Backups & storage
# -----------------------------------------------------------------------------
# OPTIONAL — Backup output directory. Default: process.cwd()/backups. In Docker: /app/backups.
BACKUP_DIR=/app/backups

# OPTIONAL — Base path for product/table image uploads. Default: process.cwd()/public/pos-images.
# POS_UPLOAD_BASE=/app/public/pos-images

# -----------------------------------------------------------------------------
# Optional
# -----------------------------------------------------------------------------
# OPTIONAL — lib/print-jobs.ts. Default: "Café".
# CAFE_NAME=Café Havilah

# -----------------------------------------------------------------------------
# Pesapal (optional; required only if using Pesapal payments)
# -----------------------------------------------------------------------------
# OPTIONAL — lib/config.ts
# PESAPAL_BASE_URL=https://cybqa.pesapal.com/pesapalv3/api
# PESAPAL_CONSUMER_KEY=
# PESAPAL_CONSUMER_SECRET=
# PESAPAL_IPN_ID=
# PESAPAL_CALLBACK_URL=
# OPTIONAL — app/api/payments/pesapal/webhook/route.ts. Required if Pesapal webhook is used (else 500 when webhook called).
# PESAPAL_WEBHOOK_SECRET=
